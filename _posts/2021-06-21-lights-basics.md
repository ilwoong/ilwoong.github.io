---
layout: post
title: IoT 스위치로 조명 스위치 교체하기
tags: [조명, 스위치]
author: ilwoong
---

보통 자기 전에 잠깐 휴대폰을 보거나, 책을 읽거나 하면서 시간을 보내게 되는데, 잠이 와서 자고 싶은데 졸음을 이기고 불을 끄러 일어나는 것은 너무나 귀찮은 일입니다. 이사를 하게 되면서 예전부터 관심이 있었던 IoT 장치 중 조명 스위치를 무조건 설치해야겠다 마음을 먹었습니다. 그러나 220V가 흐르는 조명을 다루는 것은 웬지 겁이 납니다.선을 잘못 연결하면 웬지 불이 나거나 터질 것같은 불안감이 듭니다. 작업하기 전에 기초 지식을 알아두고 시작해야겠습니다.

### 조명 회로 기본

우리나라 가정에서 사용하는 일반적인 조명의 회로도를 그려보면 아래 그림과 같습니다. 우리나라는 220V-60Hz 교류전원이 가정으로 들어오는데, 이는 활선의 극이 +에서 -로 바뀌는 것을 초당 60회 반복한다는 뜻입니다. 중국이나 일본에서 직구한 가전 제품의 경우 50Hz로 되어있는 것이 있다면 우리나라에서는 오동작하거나 금방 고장날 확률이 높습니다.

![상시 조명]({{ "/assets/img/iot/light-circuit.svg" | relative_url }})

가정 조명은 조명 스위치 부분은 절연이 되어 있기때문에 보통 접지가 생략되며, 활선과 중성선의 2개의 선으로 이루어져 있는 경우가 대부분입니다. 위 그림에서 빨간 색으로 표시한 선이 활선이고, 검정색으로 표시한 선이 중성선입니다. 전원(가정의 경우에는 분전반)의 활선으로부터 전기가 흘러서 작동하고자 하는 장치를 통과해서 중성선으로 빠져나가도록 하여 전기가 흐르면 연결된 장치가 동작합니다. 위 그림처럼 연결되면 조명이 수명을 다할 때까지 계속 켜있게 됩니다.

### 조명 스위치

특수한 공간이 아닌 이상 조명을 계속 켜둘수는 없는 일이기 때문에 보통 조명은 스위치가 달려있습니다. 

![스위치]({{ "/assets/img/iot/switch-circuit.svg" | relative_url }})

전기가 흐르도록 연결되어있는 회로에서 임의의 한 곳을 끊어서 열었다 닫았다 할 수 있게 만들어주는 것입니다. 보통은 활선의 중간에 스위치가 설치됩니다. 제 목표는 이 스위치를 IoT 스위치로 변경하여 앱 또는 음성 명령으로 동작하게 하는 것입니다. 

초기에 IoT 스위치를 적용하는 분들이 여기에서 난관을 겪었다고 하는데, 이는 스위치도 전자 제품으로 별도 전원이 필요하기 때문에 3선식 스위치만 출시되었기 때문입니다. 정확하진 않지만 대략 아래 그림과 같이 연결되어야 합니다.

![스위치]({{ "/assets/img/iot/switch-3wires.svg" | relative_url }})

그런데 위에서도 적었듯이 우리나라 일반 가정(아파트 포함)의 조명은 거의 대부분 2선식으로 시공이 되어있다고 합니다. (스위치 박스로 중성선이 내려오지 않습니다.) 요비선을 이용하여 선을 하나 더 넣으면 된다고는 하는데 이게 그리 쉬운 일은 아니라고 합니다. 

최근에는 국내 사정을 고려하여 2선식 IoT 스위치가 출시되고 있습니다. 스위치는 동작시킬 수 있지만 조명은 동작시키기 힘든 미세 전류를 흘려서 중성선 추가 없이도 동작하게 하는 방식이라고 하는데, 일반적인 가정에도 쉽게 설치가 된다는 장점이 있지만, 연결할 조명이 사용하는 전력이 일정 수준(대략 10~20W) 이상이어야 제대로 동작하는 한계가 있습니다.

인테리어 공사할때는 이런 부분을 몰라서 추가해달라고 못했고, 직접 중성선 시공을 할 자신도 없었기 때문에 2선식 스마트 스위치를 구매해서 작업하였습니다.

### 3로 스위치

현관을 들어서면 거실까지 약간 길게 복도가 있습니다. 복도에 다운라이트 4구가 설치되어 있고, 복도 양 끝에서 켜고 끌 수 있게 스위치가 설치되어 있습니다. 한 쪽에서 조명을 켜 놓으면, 다른 쪽에 가서 스위치 상태를 변경하면 꺼지게 됩니다. 이렇게 구성된 스위치를 3로 스위치라고 하더군요. 처음엔 용어를 몰라서 검색하기 힘들었습니다. 이를 회로로 그려보면 다음과 같습니다.

![스위치]({{ "/assets/img/iot/switch-3way.svg" | relative_url }})

### 3로 스위치를 IoT 스위치로 변경하기

3로로 구성된 스위치들을 IoT 스위치로 변경하려고 하면 작업을 시작하기 전에 조금 고민을 해야 합니다. 그냥 스위치 두개를 바꾸면 되는 것은 아닙니다. 결론적으로는 스위치 두개 중 하나로만 동작하게 회로를 바꾸고, 다른 하나는 IoT 플랫폼에서 제공하는 자동화 동작 등으로 메인 스위치 동작을 따라하게 만드는 것으로 해결할 수 있습니다.

![스위치]({{ "/assets/img/iot/3way-iot.svg" | relative_url }})

이러면 안쓰는 선이 생기게 되는데 혹시 모를 상황에 대비하여 양 끝을 잘 절연(커넥터를 씌우던지, 절연테이프로 마감)해줘야 합니다. 3로를 구성하는 두 선이 색으로 잘 구별되어 있으면 좋은데, 저희 집 같은 경우는 같은 색으로 연결되어 있어, 어느 쪽이 연결되었는지를 확인하려면 분전반을 여러 번 올렸다 내렸다 해야 했습니다. 그래서 귀찮아서 아래와 같이 두 선을 하나로 연결햇 하나의 선처럼 구성해버렸습니다.

![스위치]({{ "/assets/img/iot/3way-iot2.svg" | relative_url }})

### 작업 팁

- 스위치 교체시 가장 중요한 것은 안전입니다. 반드시 분전반의 전원을 내리고, 스위치를 여러번 껐다 켰다 해서 정말 전기가 안들어오는지 확인한 다음 절연 장갑을 착용하고 작업을 수행해야 합니다. 
- 헤드랜턴이 있으면 양손을 자유롭게 사용하여 쉽게 작업할 수 있습니다.
- 전선이 피복이 벗겨져서 노출되는 부분은 가급적 없어야 합니다. 어쩔 수 없이 노출되는 경우에는 절연 테이프 등으로 마감하는 것이 좋습니다.
- 스위치를 벽에서 떼내거나 고정할때 전동드라이버로 막 작업하다가는 나사못이 마모되기 쉽습니다.  힘들어도 전동 드라이버 대신 라쳇 드라이버 등으로 수동으로 작업하는 것이 나사못의 마모 방지에 도움이 됩니다.
- 전선 연결은 Wago 커넥터를 사용하면 편합니다. 일반적인 조명 전선으로 사용되는 2.5sq 전선의 경우는 221-4시리즈(2구 412, 3구 413)를 사용하면 딱 맞습니다.